import{d as ne,b as A,a as d,f as v,s as k,c as pe,e as fe}from"../chunks/CyNfHtry.js";import{M as ue,aG as be,p as Z,t as M,a as J,s as i,c as r,r as t,g as n,y as xe,f as ae,e as me,a6 as _e,h as X,aM as he}from"../chunks/DUOIInB9.js";import{B as ye,i as E,s as V,a as w}from"../chunks/B22MubrG.js";import{i as re}from"../chunks/BI3IV-ao.js";import{e as ie,i as ge}from"../chunks/C2eLq_D0.js";import{b as ce}from"../chunks/C0zNEv0Q.js";import{s as te}from"../chunks/D7iecON0.js";import{p as $e}from"../chunks/D5y8zx2n.js";import{p as Y,B as we,C as je,b as Q,a as ee,i as G,D as Ce,s as I,n as ke,E as Pe,k as Re,f as Ue,F as Le}from"../chunks/B-0l54sc.js";import{c as se}from"../chunks/neMrXvPf.js";import{b as Me}from"../chunks/IyXFpIzT.js";import{u as le,r as de,a as Ee,b as Ne,c as oe}from"../chunks/DfOa05yV.js";function Se(U,P,...c){var b=new ye(U);ue(()=>{const p=P()??null;b.ensure(p,p&&(h=>p(h,...c)))},be)}const Te=!0,Be=!1,mt=Object.freeze(Object.defineProperty({__proto__:null,prerender:Te,ssr:Be},Symbol.toStringTag,{value:"Module"}));var De=v('<span class="font-bold text-sm text-text-primary">Cabinet Maker</span>'),Oe=v("<span> </span>"),Fe=v('<a><span class="w-5 h-5 flex items-center justify-center text-xs font-mono font-bold rounded bg-border"> </span> <!></a>'),Ke=v('<div class="p-3 border-t border-border text-xs text-text-secondary space-y-1"><div> </div> <div> </div></div>'),ze=v('<nav><div class="flex items-center justify-between p-3 border-b border-border"><!> <button class="text-text-secondary hover:text-text-primary text-xs px-1"> </button></div> <div class="flex-1 py-2"></div> <!></nav>');function Ae(U,P){Z(P,!1);const c=()=>w(se,"$sidebarCollapsed",x),b=()=>w(Y,"$project",x),p=()=>w(we,"$cabinetCount",x),h=()=>w(je,"$totalPartCount",x),[x,y]=V(),L=[{href:"/",label:"Home",icon:"H"},{href:"/project",label:"Project",icon:"P"},{href:"/cabinets",label:"Cabinets",icon:"C"},{href:"/materials",label:"Materials",icon:"M"},{href:"/cutlist",label:"Cut List",icon:"L"},{href:"/nesting",label:"Nesting",icon:"N"},{href:"/preview",label:"3D Preview",icon:"3"},{href:"/generate",label:"Generate",icon:"G"}];re();var l=ze();let g;var s=r(l),$=r(s);{var B=f=>{var m=De();d(f,m)};E($,f=>{c()||f(B)})}var S=i($,2),H=r(S,!0);t(S),t(s);var N=i(s,2);ie(N,5,()=>L,ge,(f,m)=>{const _=xe(()=>$e.url.pathname===n(m).href);var j=Fe();let a;var o=r(j),R=r(o,!0);t(o);var q=i(o,2);{var D=z=>{var O=Oe(),W=r(O,!0);t(O),M(()=>k(W,n(m).label)),d(z,O)};E(q,z=>{c()||z(D)})}t(j),M(()=>{ce(j,"href",n(m).href),a=te(j,1,"flex items-center gap-2 px-3 py-2 text-sm transition-colors",null,a,{"bg-surface":n(_),"text-accent":n(_),"text-text-secondary":!n(_),"hover:bg-surface-hover":!n(_),"hover:text-text-primary":!n(_)}),k(R,n(m).icon)}),d(f,j)}),t(N);var F=i(N,2);{var K=f=>{var m=Ke(),_=r(m),j=r(_);t(_);var a=i(_,2),o=r(a);t(a),t(m),M(()=>{k(j,`Cabinets: ${p()??""}`),k(o,`Parts: ${h()??""}`)}),d(f,m)};E(F,f=>{!c()&&b()&&f(K)})}t(l),M(()=>{g=te(l,1,"flex flex-col bg-bg-secondary border-r border-border h-full transition-all duration-200",null,g,{"w-48":!c(),"w-12":c()}),k(H,c()?">":"<")}),A("click",S,()=>se.update(f=>!f)),d(U,l),J(),y()}ne(["click"]);var Ge=v('<span class="font-medium text-text-primary"> </span>'),He=v('<span class="text-warning">Modified</span>'),Ie=v('<span class="truncate max-w-64"> </span>'),qe=v('<input type="file" accept=".toml" class="hidden"/> <header class="flex items-center justify-between px-4 py-2 bg-bg-secondary border-b border-border"><div class="flex items-center gap-2"><button class="px-3 py-1 text-xs bg-surface hover:bg-surface-hover text-text-primary rounded transition-colors">New</button> <button class="px-3 py-1 text-xs bg-surface hover:bg-surface-hover text-text-primary rounded transition-colors">Open</button> <button class="px-3 py-1 text-xs bg-surface hover:bg-surface-hover text-text-primary rounded transition-colors">Save</button> <div class="w-px h-4 bg-border mx-1"></div> <button class="px-3 py-1 text-xs bg-surface hover:bg-surface-hover text-text-primary rounded transition-colors disabled:opacity-40 disabled:cursor-not-allowed" title="Undo (Ctrl+Z)">Undo</button> <button class="px-3 py-1 text-xs bg-surface hover:bg-surface-hover text-text-primary rounded transition-colors disabled:opacity-40 disabled:cursor-not-allowed" title="Redo (Ctrl+Y)">Redo</button></div> <div class="flex items-center gap-3 text-xs text-text-secondary"><!> <!> <!></div></header>',1);function We(U,P){Z(P,!1);const c=()=>w(ee,"$projectPath",y),b=()=>w(Y,"$project",y),p=()=>w(Ee,"$canUndo",y),h=()=>w(Ne,"$canRedo",y),x=()=>w(Q,"$isDirty",y),[y,L]=V();let l=_e();async function g(){try{G.set(!0);const e=await ke();Y.set(e),oe(),ee.set(null),Q.set(!1),I("New project created","success")}catch(e){I(`Error: ${e}`,"error")}finally{G.set(!1)}}function s(){n(l).click()}async function $(e){const u=e.target,C=u.files?.[0];if(C)try{G.set(!0);const T=await C.text(),ve=await Ce(T,C.name);Y.set(ve),oe(),ee.set(C.name),Q.set(!1),I("Project opened","success")}catch(T){I(`Error: ${T}`,"error")}finally{G.set(!1),u.value=""}}async function B(){try{G.set(!0);const e=await Pe(),u=new Blob([e],{type:"application/toml"}),C=c()||"project.toml";S(u,C),Q.set(!1),I("Project saved","success")}catch(e){I(`Error: ${e}`,"error")}finally{G.set(!1)}}function S(e,u){const C=URL.createObjectURL(e),T=document.createElement("a");T.href=C,T.download=u,document.body.appendChild(T),T.click(),document.body.removeChild(T),URL.revokeObjectURL(C)}re();var H=qe(),N=ae(H);Me(N,e=>me(l,e),()=>n(l));var F=i(N,2),K=r(F),f=r(K),m=i(f,2),_=i(m,2),j=i(_,4),a=i(j,2);t(K);var o=i(K,2),R=r(o);{var q=e=>{var u=Ge(),C=r(u,!0);t(u),M(()=>k(C,b().project.name)),d(e,u)};E(R,e=>{b()&&e(q)})}var D=i(R,2);{var z=e=>{var u=He();d(e,u)};E(D,e=>{x()&&e(z)})}var O=i(D,2);{var W=e=>{var u=Ie(),C=r(u,!0);t(u),M(()=>{ce(u,"title",c()),k(C,c())}),d(e,u)};E(O,e=>{c()&&e(W)})}t(o),t(F),M(()=>{_.disabled=!b(),j.disabled=!p(),a.disabled=!h()}),A("change",N,$),A("click",f,g),A("click",m,s),A("click",_,B),A("click",j,function(...e){le?.apply(this,e)}),A("click",a,function(...e){de?.apply(this,e)}),d(U,H),J(),L()}ne(["change","click"]);var Ye=v("<span> </span> <span> </span> <span> </span>",1),Ze=v("<span>No project loaded</span>"),Je=v('<span class="text-error"> </span>'),Qe=v('<span class="text-warning"> </span>'),Ve=v('<span class="animate-pulse">Working...</span>'),Xe=v('<footer class="flex items-center justify-between px-4 py-1 bg-bg-secondary border-t border-border text-xs text-text-secondary"><div class="flex items-center gap-4"><!></div> <div class="flex items-center gap-4"><!> <!> <!></div></footer>');function et(U,P){Z(P,!0);const c=()=>w(Ue,"$cachedParts",x),b=()=>w(Re,"$validationResult",x),p=()=>w(Y,"$project",x),h=()=>w(G,"$isLoading",x),[x,y]=V(),L=X(()=>c().length),l=X(()=>b()?.errors?.length??0),g=X(()=>b()?.warnings?.length??0);var s=Xe(),$=r(s),B=r($);{var S=a=>{var o=Ye(),R=ae(o),q=r(R);t(R);var D=i(R,2),z=r(D);t(D);var O=i(D,2),W=r(O);t(O),M(()=>{k(q,`Units: ${p().project.units??""}`),k(z,`Materials: ${p().materials.length+(p().material?1:0)}`),k(W,`Parts: ${n(L)??""}`)}),d(a,o)},H=a=>{var o=Ze();d(a,o)};E(B,a=>{p()?a(S):a(H,!1)})}t($);var N=i($,2),F=r(N);{var K=a=>{var o=Je(),R=r(o);t(o),M(()=>k(R,`${n(l)??""} error${n(l)!==1?"s":""}`)),d(a,o)};E(F,a=>{n(l)>0&&a(K)})}var f=i(F,2);{var m=a=>{var o=Qe(),R=r(o);t(o),M(()=>k(R,`${n(g)??""} warning${n(g)!==1?"s":""}`)),d(a,o)};E(f,a=>{n(g)>0&&a(m)})}var _=i(f,2);{var j=a=>{var o=Ve();d(a,o)};E(_,a=>{h()&&a(j)})}t(N),t(s),d(U,s),J(),y()}var tt=v("<div> </div>"),at=v('<div class="fixed bottom-12 right-4 z-50 flex flex-col gap-2"></div>');function rt(U,P){Z(P,!1);const c=()=>w(Le,"$toasts",b),[b,p]=V();re();var h=pe(),x=ae(h);{var y=L=>{var l=at();ie(l,5,c,g=>g.id,(g,s)=>{var $=tt();let B;var S=r($,!0);t($),M(()=>{B=te($,1,"px-4 py-2 rounded shadow-lg text-sm text-white max-w-80 animate-fade-in",null,B,{"bg-blue-600":n(s).type==="info","bg-green-600":n(s).type==="success","bg-red-600":n(s).type==="error","bg-yellow-600":n(s).type==="warning"}),k(S,n(s).message)}),d(g,$)}),t(l),d(L,l)};E(x,L=>{c().length>0&&L(y)})}d(U,h),J(),p()}var st=v('<div class="flex flex-col h-screen"><!> <div class="flex flex-1 overflow-hidden"><!> <main class="flex-1 overflow-auto p-6"><!></main></div> <!> <!></div>');function _t(U,P){Z(P,!0);function c(s){(s.metaKey||s.ctrlKey)&&(s.key==="z"&&!s.shiftKey?(s.preventDefault(),le()):(s.key==="y"||s.key==="z"&&s.shiftKey)&&(s.preventDefault(),de()))}var b=st();fe("keydown",he,c);var p=r(b);We(p,{});var h=i(p,2),x=r(h);Ae(x,{});var y=i(x,2),L=r(y);Se(L,()=>P.children),t(y),t(h);var l=i(h,2);et(l,{});var g=i(l,2);rt(g,{}),t(b),d(U,b),J()}export{_t as component,mt as universal};
