import{d as ke,c as Te,a as I,s as z,b as d,f as L,e as M}from"../chunks/CyNfHtry.js";import{p as $e,f as je,a as Me,c as o,s as t,r,t as B,g as e,e as y,b as Z,h as ee}from"../chunks/DUOIInB9.js";import{i as U,s as Fe,a as Ne}from"../chunks/B22MubrG.js";import{e as te,i as re}from"../chunks/C2eLq_D0.js";import{r as F,s as N}from"../chunks/C0zNEv0Q.js";import{s as ae}from"../chunks/D7iecON0.js";import{i as Pe,s as De}from"../chunks/Ce36oStv.js";import{p as E,b as A,w as Ie,s as Ee}from"../chunks/B-0l54sc.js";import{p as H}from"../chunks/DfOa05yV.js";var Se=L('<div role="button" tabindex="0"><div><div class="font-medium"> </div> <div class="text-xs text-text-secondary"> </div></div> <button class="text-text-secondary hover:text-error text-xs px-1">x</button></div>'),Ae=L('<div class="p-4 bg-surface rounded border border-border space-y-3"><div><label class="block text-xs text-text-secondary mb-1">Name</label> <input type="text" class="w-full px-3 py-2 bg-bg border border-border rounded text-sm text-text-primary focus:outline-none focus:border-accent"/></div> <div class="grid grid-cols-2 gap-3"><div><label class="block text-xs text-text-secondary mb-1">Thickness</label> <input type="number" step="0.125" class="w-full px-3 py-2 bg-bg border border-border rounded text-sm text-text-primary focus:outline-none focus:border-accent"/></div> <div><label class="block text-xs text-text-secondary mb-1">Type</label> <select class="w-full px-3 py-2 bg-bg border border-border rounded text-sm text-text-primary focus:outline-none focus:border-accent"><option>Plywood</option><option>Hardwood</option><option>MDF</option><option>Melamine</option></select></div> <div><label class="block text-xs text-text-secondary mb-1">Sheet Width</label> <input type="number" step="1" class="w-full px-3 py-2 bg-bg border border-border rounded text-sm text-text-primary focus:outline-none focus:border-accent"/></div> <div><label class="block text-xs text-text-secondary mb-1">Sheet Length</label> <input type="number" step="1" class="w-full px-3 py-2 bg-bg border border-border rounded text-sm text-text-primary focus:outline-none focus:border-accent"/></div></div></div>'),Le=L('<div role="button" tabindex="0"><div><div class="font-medium"> </div> <div class="text-xs text-text-secondary"> </div></div> <button class="text-text-secondary hover:text-error text-xs px-1">x</button></div>'),Ce=L('<div class="p-4 bg-surface rounded border border-border space-y-3"><div><label class="block text-xs text-text-secondary mb-1">Description</label> <input type="text" class="w-full px-3 py-2 bg-bg border border-border rounded text-sm text-text-primary focus:outline-none focus:border-accent"/></div> <div class="grid grid-cols-2 gap-3"><div><label class="block text-xs text-text-secondary mb-1">Number</label> <input type="number" min="1" class="w-full px-3 py-2 bg-bg border border-border rounded text-sm text-text-primary focus:outline-none focus:border-accent"/></div> <div><label class="block text-xs text-text-secondary mb-1">Diameter</label> <input type="number" step="0.0625" class="w-full px-3 py-2 bg-bg border border-border rounded text-sm text-text-primary focus:outline-none focus:border-accent"/></div> <div><label class="block text-xs text-text-secondary mb-1">Flutes</label> <input type="number" min="1" max="8" class="w-full px-3 py-2 bg-bg border border-border rounded text-sm text-text-primary focus:outline-none focus:border-accent"/></div> <div><label class="block text-xs text-text-secondary mb-1">Cutting Length</label> <input type="number" step="0.125" class="w-full px-3 py-2 bg-bg border border-border rounded text-sm text-text-primary focus:outline-none focus:border-accent"/></div></div></div>'),Ge=L('<div class="grid grid-cols-2 gap-8"><div><div class="flex items-center justify-between mb-3"><h2 class="text-lg font-semibold">Materials</h2> <button class="px-2 py-1 text-xs bg-accent hover:bg-accent/80 text-white rounded">+ Add</button></div> <div class="space-y-1 mb-4"></div> <!></div> <div><div class="flex items-center justify-between mb-3"><h2 class="text-lg font-semibold">Tools</h2> <button class="px-2 py-1 text-xs bg-accent hover:bg-accent/80 text-white rounded">+ Add</button></div> <div class="space-y-1 mb-4"></div> <!></div></div>'),He=L('<div class="text-text-secondary"><p>No project loaded. <a href="/" class="text-accent hover:underline">Go home</a> to create or open one.</p></div>');function Ue(oe,se){$e(se,!0);const h=()=>Ne(E,"$project",le),[le,ie]=Fe();let v=Z(null),b=Z(null);function ne(){return{name:"New Material",thickness:.75,sheet_width:48,sheet_length:96,material_type:"plywood"}}function de(){return{number:(h()?.tools.length??0)+1,tool_type:"endmill",diameter:.25,flutes:2,cutting_length:1,description:"New Tool"}}function ue(){H(),E.update(a=>(a&&(a.materials.push(ne()),y(v,a.materials.length-1)),a)),A.set(!0),x()}function ce(a){H(),E.update(l=>(l&&l.materials.splice(a,1),l)),e(v)===a&&y(v,null),A.set(!0),x()}function ve(){H(),E.update(a=>(a&&(a.tools.push(de()),y(b,a.tools.length-1)),a)),A.set(!0),x()}function be(a){H(),E.update(l=>(l&&l.tools.splice(a,1),l)),e(b)===a&&y(b,null),A.set(!0),x()}async function x(){H();const a=h();if(a)try{await Ie(a)}catch(l){Ee(`Error: ${l}`,"error")}}function C(a,l){E.update(f=>(f&&e(v)!==null&&e(v)<f.materials.length&&(f.materials[e(v)][a]=l),f)),A.set(!0)}function G(a,l){E.update(f=>(f&&e(b)!==null&&e(b)<f.tools.length&&(f.tools[e(b)][a]=l),f)),A.set(!0)}const P=ee(()=>h()&&e(v)!==null&&e(v)<(h()?.materials.length??0)?h().materials[e(v)]:null),S=ee(()=>h()&&e(b)!==null&&e(b)<(h()?.tools.length??0)?h().tools[e(b)]:null);var V=Te(),pe=je(V);{var xe=a=>{var l=Ge(),f=o(l),J=o(f),fe=t(o(J),2);r(J);var K=t(J,2);te(K,5,()=>h().materials,re,(w,c,i)=>{var s=Se();let k;var p=o(s),u=o(p),T=o(u,!0);r(u);var n=t(u,2),$=o(n);r(n),r(p);var _=t(p,2);r(s),B(()=>{k=ae(s,1,"w-full flex items-center justify-between px-3 py-2 text-sm rounded text-left cursor-pointer",null,k,{"bg-surface":e(v)===i,"hover:bg-surface-hover":e(v)!==i}),z(T,e(c).name),z($,`${e(c).thickness??""}" ${e(c).material_type??""}`)}),d("click",s,()=>{y(v,i,!0),y(b,null)}),d("keydown",s,m=>{m.key==="Enter"&&(y(v,i,!0),y(b,null))}),d("click",_,m=>{m.stopPropagation(),ce(i)}),I(w,s)}),r(K);var _e=t(K,2);{var ge=w=>{var c=Ae(),i=o(c),s=t(o(i),2);F(s),r(i);var k=t(i,2),p=o(k),u=t(o(p),2);F(u),r(p);var T=t(p,2),n=t(o(T),2),$=o(n);$.value=$.__value="plywood";var _=t($);_.value=_.__value="hardwood";var m=t(_);m.value=m.__value="mdf";var D=t(m);D.value=D.__value="melamine",r(n);var g;Pe(n),r(T);var R=t(T,2),W=t(o(R),2);F(W),r(R);var Y=t(R,2),q=t(o(Y),2);F(q),r(Y),r(k),r(c),B(()=>{N(s,e(P).name),N(u,e(P).thickness),g!==(g=e(P).material_type)&&(n.value=(n.__value=e(P).material_type)??"",De(n,e(P).material_type)),N(W,e(P).sheet_width),N(q,e(P).sheet_length)}),d("input",s,j=>C("name",j.target.value)),M("blur",s,x),d("input",u,j=>C("thickness",parseFloat(j.target.value))),M("blur",u,x),d("change",n,j=>{C("material_type",j.target.value),x()}),d("input",W,j=>C("sheet_width",parseFloat(j.target.value))),M("blur",W,x),d("input",q,j=>C("sheet_length",parseFloat(j.target.value))),M("blur",q,x),I(w,c)};U(_e,w=>{e(P)&&w(ge)})}r(f);var X=t(f,2),O=o(X),ye=t(o(O),2);r(O);var Q=t(O,2);te(Q,5,()=>h().tools,re,(w,c,i)=>{var s=Le();let k;var p=o(s),u=o(p),T=o(u);r(u);var n=t(u,2),$=o(n);r(n),r(p);var _=t(p,2);r(s),B(()=>{k=ae(s,1,"w-full flex items-center justify-between px-3 py-2 text-sm rounded text-left cursor-pointer",null,k,{"bg-surface":e(b)===i,"hover:bg-surface-hover":e(b)!==i}),z(T,`T${e(c).number??""}: ${e(c).description??""}`),z($,`${e(c).diameter??""}" ${e(c).tool_type??""}`)}),d("click",s,()=>{y(b,i,!0),y(v,null)}),d("keydown",s,m=>{m.key==="Enter"&&(y(b,i,!0),y(v,null))}),d("click",_,m=>{m.stopPropagation(),be(i)}),I(w,s)}),r(Q);var he=t(Q,2);{var we=w=>{var c=Ce(),i=o(c),s=t(o(i),2);F(s),r(i);var k=t(i,2),p=o(k),u=t(o(p),2);F(u),r(p);var T=t(p,2),n=t(o(T),2);F(n),r(T);var $=t(T,2),_=t(o($),2);F(_),r($);var m=t($,2),D=t(o(m),2);F(D),r(m),r(k),r(c),B(()=>{N(s,e(S).description),N(u,e(S).number),N(n,e(S).diameter),N(_,e(S).flutes),N(D,e(S).cutting_length)}),d("input",s,g=>G("description",g.target.value)),M("blur",s,x),d("input",u,g=>G("number",parseInt(g.target.value))),M("blur",u,x),d("input",n,g=>G("diameter",parseFloat(g.target.value))),M("blur",n,x),d("input",_,g=>G("flutes",parseInt(g.target.value))),M("blur",_,x),d("input",D,g=>G("cutting_length",parseFloat(g.target.value))),M("blur",D,x),I(w,c)};U(he,w=>{e(S)&&w(we)})}r(X),r(l),d("click",fe,ue),d("click",ye,ve),I(a,l)},me=a=>{var l=He();I(a,l)};U(pe,a=>{h()?a(xe):a(me,!1)})}I(oe,V),Me(),ie()}ke(["click","keydown","input","change"]);export{Ue as component};
