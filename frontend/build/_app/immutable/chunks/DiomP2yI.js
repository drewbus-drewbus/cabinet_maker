import{al as u,J as p,am as c}from"./BepynHdk.js";import{p as i,w as d,s as f}from"./DEoDEiov.js";const h=50,r=p([]),o=p([]),S=u(r,t=>t.length>0),y=u(o,t=>t.length>0);function J(){const t=c(i);if(!t)return;const e=JSON.stringify(t);r.update(a=>{const n=[...a,e];return n.length>h&&n.shift(),n}),o.set([])}async function N(){const t=c(r);if(t.length===0)return;const e=c(i);e&&o.update(s=>[...s,JSON.stringify(e)]);const a=t[t.length-1];r.update(s=>s.slice(0,-1));const n=JSON.parse(a);i.set(n);try{await d(n)}catch(s){f(`Undo sync error: ${s}`,"error")}}async function O(){const t=c(o);if(t.length===0)return;const e=c(i);e&&r.update(s=>[...s,JSON.stringify(e)]);const a=t[t.length-1];o.update(s=>s.slice(0,-1));const n=JSON.parse(a);i.set(n);try{await d(n)}catch(s){f(`Redo sync error: ${s}`,"error")}}function m(){r.set([]),o.set([])}export{S as a,y as b,m as c,J as p,O as r,N as u};
