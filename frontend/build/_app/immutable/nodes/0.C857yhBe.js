import{d as ie,b as A,a as v,f as p,s as k,c as fe,e as ue}from"../chunks/pWOMhstZ.js";import{M as be,aD as xe,p as Y,t as D,a as Z,s as c,c as s,r,g as i,y as me,f as re,e as _e,a6 as he,h as ee,aJ as ye}from"../chunks/BepynHdk.js";import{B as ge,i as E,s as V,a as w}from"../chunks/CaLNNbA5.js";import{i as se}from"../chunks/DWMYr-GH.js";import{e as ce,i as $e}from"../chunks/9pRRSWtK.js";import{b as le}from"../chunks/BfDX1O-d.js";import{s as ae}from"../chunks/DkQQvypr.js";import{p as we}from"../chunks/r8tgtEiy.js";import{p as W,B as je,C as Ce,b as Q,a as te,i as H,D as ke,s as I,n as Pe,E as Re,k as Ue,f as Le,F as De}from"../chunks/DEoDEiov.js";import{c as oe}from"../chunks/Gq__uSar.js";import{b as Ee}from"../chunks/EnNr4Sxw.js";import{u as de,r as ve,a as Me,b as Ne,c as ne}from"../chunks/DiomP2yI.js";function Se(U,P,...l){var b=new ge(U);be(()=>{const f=P()??null;b.ensure(f,f&&(h=>f(h,...l)))},xe)}const Te=!0,Be=!1,_t=Object.freeze(Object.defineProperty({__proto__:null,prerender:Te,ssr:Be},Symbol.toStringTag,{value:"Module"}));var Oe=p('<span class="font-bold text-sm text-text-primary">Cabinet Maker</span>'),Fe=p("<span> </span>"),Ke=p('<a><span class="w-5 h-5 flex items-center justify-center text-xs font-mono font-bold rounded bg-border"> </span> <!></a>'),ze=p('<div class="p-3 border-t border-border text-xs text-text-secondary space-y-1"><div> </div> <div> </div></div>'),Ae=p('<nav><div class="flex items-center justify-between p-3 border-b border-border"><!> <button class="text-text-secondary hover:text-text-primary text-xs px-1"> </button></div> <div class="flex-1 py-2"></div> <!></nav>');function He(U,P){Y(P,!1);const l=()=>w(oe,"$sidebarCollapsed",x),b=()=>w(W,"$project",x),f=()=>w(je,"$cabinetCount",x),h=()=>w(Ce,"$totalPartCount",x),[x,y]=V(),L=[{href:"/",label:"Home",icon:"H"},{href:"/project",label:"Project",icon:"P"},{href:"/cabinets",label:"Cabinets",icon:"C"},{href:"/materials",label:"Materials",icon:"M"},{href:"/cutlist",label:"Cut List",icon:"L"},{href:"/nesting",label:"Nesting",icon:"N"},{href:"/preview",label:"3D Preview",icon:"3"},{href:"/generate",label:"Generate",icon:"G"}];se();var d=Ae();let g;var o=s(d),$=s(o);{var S=u=>{var m=Oe();v(u,m)};E($,u=>{l()||u(S)})}var N=c($,2),G=s(N,!0);r(N),r(o);var M=c(o,2);ce(M,5,()=>L,$e,(u,m)=>{const _=me(()=>we.url.pathname===i(m).href);var j=Ke();let e;var t=s(j),R=s(t,!0);r(t);var q=c(t,2);{var T=z=>{var B=Fe(),J=s(B,!0);r(B),D(()=>k(J,i(m).label)),v(z,B)};E(q,z=>{l()||z(T)})}r(j),D(()=>{le(j,"href",i(m).href),e=ae(j,1,"flex items-center gap-2 px-3 py-2 text-sm transition-colors",null,e,{"bg-surface":i(_),"text-accent":i(_),"text-text-secondary":!i(_),"hover:bg-surface-hover":!i(_),"hover:text-text-primary":!i(_)}),k(R,i(m).icon)}),v(u,j)}),r(M);var F=c(M,2);{var K=u=>{var m=ze(),_=s(m),j=s(_);r(_);var e=c(_,2),t=s(e);r(e),r(m),D(()=>{k(j,`Cabinets: ${f()??""}`),k(t,`Parts: ${h()??""}`)}),v(u,m)};E(F,u=>{!l()&&b()&&u(K)})}r(d),D(()=>{g=ae(d,1,"flex flex-col bg-bg-secondary border-r border-border h-full transition-all duration-200",null,g,{"w-48":!l(),"w-12":l()}),k(G,l()?">":"<")}),A("click",N,()=>oe.update(u=>!u)),v(U,d),Z(),y()}ie(["click"]);var Ge=p('<span class="font-medium text-text-primary"> </span>'),Ie=p('<span class="text-warning">Modified</span>'),qe=p('<span class="truncate max-w-64"> </span>'),Je=p('<input type="file" accept=".toml" class="hidden"/> <header class="flex items-center justify-between px-4 py-2 bg-bg-secondary border-b border-border"><div class="flex items-center gap-2"><button class="px-3 py-1 text-xs bg-surface hover:bg-surface-hover text-text-primary rounded transition-colors">New</button> <button class="px-3 py-1 text-xs bg-surface hover:bg-surface-hover text-text-primary rounded transition-colors">Open</button> <button class="px-3 py-1 text-xs bg-surface hover:bg-surface-hover text-text-primary rounded transition-colors">Save</button> <div class="w-px h-4 bg-border mx-1"></div> <button class="px-3 py-1 text-xs bg-surface hover:bg-surface-hover text-text-primary rounded transition-colors disabled:opacity-40 disabled:cursor-not-allowed" title="Undo (Ctrl+Z)">Undo</button> <button class="px-3 py-1 text-xs bg-surface hover:bg-surface-hover text-text-primary rounded transition-colors disabled:opacity-40 disabled:cursor-not-allowed" title="Redo (Ctrl+Y)">Redo</button></div> <div class="flex items-center gap-3 text-xs text-text-secondary"><!> <!> <!></div></header>',1);function We(U,P){Y(P,!1);const l=()=>w(te,"$projectPath",y),b=()=>w(W,"$project",y),f=()=>w(Me,"$canUndo",y),h=()=>w(Ne,"$canRedo",y),x=()=>w(Q,"$isDirty",y),[y,L]=V();let d=he();async function g(){try{H.set(!0);const a=await Pe();W.set(a),ne(),te.set(null),Q.set(!1),I("New project created","success")}catch(a){I(`Error: ${a}`,"error")}finally{H.set(!1)}}function o(){i(d).click()}async function $(a){var O;const n=a.target,C=(O=n.files)==null?void 0:O[0];if(C)try{H.set(!0);const X=await C.text(),pe=await ke(X,C.name);W.set(pe),ne(),te.set(C.name),Q.set(!1),I("Project opened","success")}catch(X){I(`Error: ${X}`,"error")}finally{H.set(!1),n.value=""}}async function S(){try{H.set(!0);const a=await Re(),n=new Blob([a],{type:"application/toml"}),C=l()||"project.toml";N(n,C),Q.set(!1),I("Project saved","success")}catch(a){I(`Error: ${a}`,"error")}finally{H.set(!1)}}function N(a,n){const C=URL.createObjectURL(a),O=document.createElement("a");O.href=C,O.download=n,document.body.appendChild(O),O.click(),document.body.removeChild(O),URL.revokeObjectURL(C)}se();var G=Je(),M=re(G);Ee(M,a=>_e(d,a),()=>i(d));var F=c(M,2),K=s(F),u=s(K),m=c(u,2),_=c(m,2),j=c(_,4),e=c(j,2);r(K);var t=c(K,2),R=s(t);{var q=a=>{var n=Ge(),C=s(n,!0);r(n),D(()=>k(C,b().project.name)),v(a,n)};E(R,a=>{b()&&a(q)})}var T=c(R,2);{var z=a=>{var n=Ie();v(a,n)};E(T,a=>{x()&&a(z)})}var B=c(T,2);{var J=a=>{var n=qe(),C=s(n,!0);r(n),D(()=>{le(n,"title",l()),k(C,l())}),v(a,n)};E(B,a=>{l()&&a(J)})}r(t),r(F),D(()=>{_.disabled=!b(),j.disabled=!f(),e.disabled=!h()}),A("change",M,$),A("click",u,g),A("click",m,o),A("click",_,S),A("click",j,function(...a){var n;(n=de)==null||n.apply(this,a)}),A("click",e,function(...a){var n;(n=ve)==null||n.apply(this,a)}),v(U,G),Z(),L()}ie(["change","click"]);var Ye=p("<span> </span> <span> </span> <span> </span>",1),Ze=p("<span>No project loaded</span>"),Qe=p('<span class="text-error"> </span>'),Ve=p('<span class="text-warning"> </span>'),Xe=p('<span class="animate-pulse">Working...</span>'),et=p('<footer class="flex items-center justify-between px-4 py-1 bg-bg-secondary border-t border-border text-xs text-text-secondary"><div class="flex items-center gap-4"><!></div> <div class="flex items-center gap-4"><!> <!> <!></div></footer>');function tt(U,P){Y(P,!0);const l=()=>w(Le,"$cachedParts",x),b=()=>w(Ue,"$validationResult",x),f=()=>w(W,"$project",x),h=()=>w(H,"$isLoading",x),[x,y]=V(),L=ee(()=>l().length),d=ee(()=>{var e,t;return((t=(e=b())==null?void 0:e.errors)==null?void 0:t.length)??0}),g=ee(()=>{var e,t;return((t=(e=b())==null?void 0:e.warnings)==null?void 0:t.length)??0});var o=et(),$=s(o),S=s($);{var N=e=>{var t=Ye(),R=re(t),q=s(R);r(R);var T=c(R,2),z=s(T);r(T);var B=c(T,2),J=s(B);r(B),D(()=>{k(q,`Units: ${f().project.units??""}`),k(z,`Materials: ${f().materials.length+(f().material?1:0)}`),k(J,`Parts: ${i(L)??""}`)}),v(e,t)},G=e=>{var t=Ze();v(e,t)};E(S,e=>{f()?e(N):e(G,!1)})}r($);var M=c($,2),F=s(M);{var K=e=>{var t=Qe(),R=s(t);r(t),D(()=>k(R,`${i(d)??""} error${i(d)!==1?"s":""}`)),v(e,t)};E(F,e=>{i(d)>0&&e(K)})}var u=c(F,2);{var m=e=>{var t=Ve(),R=s(t);r(t),D(()=>k(R,`${i(g)??""} warning${i(g)!==1?"s":""}`)),v(e,t)};E(u,e=>{i(g)>0&&e(m)})}var _=c(u,2);{var j=e=>{var t=Xe();v(e,t)};E(_,e=>{h()&&e(j)})}r(M),r(o),v(U,o),Z(),y()}var at=p("<div> </div>"),rt=p('<div class="fixed bottom-12 right-4 z-50 flex flex-col gap-2"></div>');function st(U,P){Y(P,!1);const l=()=>w(De,"$toasts",b),[b,f]=V();se();var h=fe(),x=re(h);{var y=L=>{var d=rt();ce(d,5,l,g=>g.id,(g,o)=>{var $=at();let S;var N=s($,!0);r($),D(()=>{S=ae($,1,"px-4 py-2 rounded shadow-lg text-sm text-white max-w-80 animate-fade-in",null,S,{"bg-blue-600":i(o).type==="info","bg-green-600":i(o).type==="success","bg-red-600":i(o).type==="error","bg-yellow-600":i(o).type==="warning"}),k(N,i(o).message)}),v(g,$)}),r(d),v(L,d)};E(x,L=>{l().length>0&&L(y)})}v(U,h),Z(),f()}var ot=p('<div class="flex flex-col h-screen"><!> <div class="flex flex-1 overflow-hidden"><!> <main class="flex-1 overflow-auto p-6"><!></main></div> <!> <!></div>');function ht(U,P){Y(P,!0);function l(o){(o.metaKey||o.ctrlKey)&&(o.key==="z"&&!o.shiftKey?(o.preventDefault(),de()):(o.key==="y"||o.key==="z"&&o.shiftKey)&&(o.preventDefault(),ve()))}var b=ot();ue("keydown",ye,l);var f=s(b);We(f,{});var h=c(f,2),x=s(h);He(x,{});var y=c(x,2),L=s(y);Se(L,()=>P.children),r(y),r(h);var d=c(h,2);tt(d,{});var g=c(d,2);st(g,{}),r(b),v(U,b),Z()}export{ht as component,_t as universal};
